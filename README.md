This is a minimal example of using **TypeORM** with **Expo** (SQLite) and **Javascript** ES6 (not TypeScript!).

**Setup**:

```bash
$ expo init myapp
    (select "blank" template)

$ cd myapp/

$ expo install expo-sqlite

$ yarn add typeorm
```

**Database Config**:

Given an empty (blank) Javascript expo project:

- create `src/database/` directory at project's root;
- add `src/database/config.js` file with the followind initialization content:

```Javascript
import * as SQLite from "expo-sqlite";

// your entities will be imported here (Car is an example)
import Car from "./entities/Car";

const config = {
  database: "mydatabase",
  driver: SQLite,
  entities: [Car], // your entities will be added here (Car is an example)
  synchronize: true,
  type: "expo",
};

export default config;

```

**Entities creation**:

In TypeORM, your Models are represented by _Entities_. You can describe your database tables as well as relationships. Entities can be placed anywhere, however, I suggest organizing them ia a subfolder `src/database/entities/`. As an example, add the file `src/database/entities/Car.js` with the following content:

```Javascript
import { EntitySchema } from "typeorm";

const Car = new EntitySchema({
  name: "Car", // Entity name (your "Model")
  tableName: "cars", // database table
  columns: {
    id: {
      primary: true, // primary key
      type: "int",
      generated: true, // auto-generated
    },
    brand: {
      type: "varchar",
    },
    model: {
      type: "varchar",
    },
  },
});

export default Car;
```

In TypeScript, Entities are generated by reflection, here in JS we need to specify an _EntitySchema_. You can read more about Entities, data types, column options, etc. here: https://typeorm.io/#/entities

**Database Connection**:

Before using TypeORM, you need to create a connection. To do so, let's import our config. Open your entry point file (usually `App.js`) and add the following code:

```Javascript
// (your imports from App.js don't change)

import config from "./src/database/config"; // add
import { createConnection } from "typeorm"; // add

export default function App() {

  // add a useCallback hook
  const connect = React.useCallback(async () => {
    try {
      const connection = await createConnection(config); // create a connection with our config
    } catch (err) {
      console.log(err); // check (or deal) with connection errors
    }
  });

  // Important: connect inside a dependency-free useEffect hook to avoid multiple calls.
  React.useEffect(() => {
    connect(); // this must be done once in the App's entry point (I suggest here in App.js)
  }, []);

  // rest of your App component...
}
```

Pay attention to the try-catch block. Database connection can be opened once in the App. Hot-reloading your app in development should throw a warning, this try-catch prevents it to reach user interface as an Unhandled promise. Keep calm, this is not a problem right now, but you should inspect and deal connection errors if using this code in production.

**Using the Database**:

Data can be accessed from repositories, repositories can be obtained from the connection. Connection object can be obtained from two ways:

1. by storing `const connection` right after `createConnection(config)` (e.g. with useState or ContextApi);
2. by using `getConnection()` function. Consider app lifecycle: getConnection must run _after_ App.js main useEffect! otherwise connection may not be ready yet.

Here are some data manipulation samples using `connection` const:

```Javascript
// get all cars
const cars = await connection.getRepository("Car").find();
console.log(cars); // empty at first run

//trying to find an invalid car
const findCar99 = await connection
  .getRepository("Car")
  .findOne({ id: 99 });
console.log(findCar99); // undefined (car 99 does not exists)

//create cars
await connection.getRepository("Car").save({
  brand: "vw",
  model: "fusca",
});

await connection.getRepository("Car").save({
  brand: "vw",
  model: "brasilia",
});

await connection.getRepository("Car").save({
  brand: "ford",
  model: "corcel",
});

await connection.getRepository("Car").save({
  brand: "ford",
  model: "f1000",
});

// get all cars
const cars2 = await connection.getRepository("Car").find();
console.log(cars2); // 4-cars array

//trying to find car 2
const findCar2 = await connection.getRepository("Car").findOne({ id: 2 });
console.log(findCar2); // car 2 object

//all cars with brand="ford"
const findCarsFord = await connection
  .getRepository("Car")
  .find({ brand: "ford" });
console.log(findCarsFord); // 2-cars array

// update car with id=2
await connection
  .getRepository("Car")
  .update(2, { brand: "bmw", model: "320i" });

//find updated car
const findCar2updated = await connection
  .getRepository("Car")
  .findOne({ id: 2 });
console.log(findCar2updated); // car 2 updated object

//delete car with id=2
await connection.getRepository("Car").delete(2);

//primise-based call example (same as get all cars)
connection
  .getRepository("Car")
  .find()
  .then((cars) => {
    console.log(cars);
  });
```

**Using Database inside Components**:

As an alternative example, here's how to use `getConnection()` and access data inside a component:

```Javascript
import React from "react";
import { Text, Button } from "react-native";
import { getConnection } from "typeorm";

export default function DemoComponent() {

  // create a state to store data
  const [data, setData] = React.useState("");

  // create an async callback for your data access (use it wherever you want- example in Button)
  const loadData = React.useCallback(async () => {
    const connection = getConnection();
    const car = await connection.getRepository("Car").findOne({ id: 1 });

    //update your state when data is loaded
    setData(`brand:${car.brand} model:${car.model}`);
  });

  return (
    <>
      <Button title="Load Data Inside a Component" onPress={loadData} />
      <Text>{data}</Text>
    </>
  );
}

```

**Reference**:

https://typeorm.io/#/

https://typeorm.io/#/usage-with-javascript

https://github.com/typeorm/expo-example/blob/master/src/AppRoot.tsx

https://docs.expo.dev/versions/latest/sdk/sqlite/
